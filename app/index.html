<!DOCTYPE html>
<html ng-app='NgAirdna'>
  <head>
    <meta charset="utf-8">
    <title>Ng-Airdna</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="css/main.css" media="screen" title="no title" charset="utf-8">
    <base href="/">
  </head>
  <body ng-controller='SearchController'>
      <div class='title'>
        <h1>Rentalizer Demo</h1>
          <div class='lead'>
              <p>Input your address to find information about yours and comparable Airbnb rentals</p>
          </div>
          <form ng-model='searchAddress'>
            <label class='hidden' for='name'></label>
            <input class='form-control' type='text' ng-model='searchAddress.address' name='address' placeholder="Search for an address here">
            <input class='form-control' type='text' ng-model='searchAddress.zip' name='zip' placeholder="Zip Code Here">
            <input class='form-control' type='text' ng-model='searchAddress.searchBR' name='br' placeholder="Bedrooms #">
            <input class='form-control' type='text' ng-model='searchAddress.searchBA' name='ba' placeholder="Bathrooms #">
            <input class='form-control' type='text' ng-model='searchAddress.searchAccom' name='accom' placeholder="Accomodates">
            <input class='btn btn-info' type='button' ng-click='submitSearch()' value='Find It'>
          </form>
          <div ng-if="view.error"><p>{{view.error}}</p></div>
          <input class='btn btn-warning' type='button' ng-click="showResults()" value='Show results'>
        </div>

          <hr>

          <div class="container" ng-if="view.current.display">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3>Rentalizer Results</h3>
              </div>

              <div class="panel-body">
                  <div class="row">
                    <div class="center col-md-8">
                      <h4>Address: {{view.current.property_details.address}} Zipcode: {{view.current.property_details.zipcode}} </h4>
                      <img src={{view.current.image}} />
                    </div>
                    <div class='col-md-4'>
                      <p>Coords: {{view.current.property_details.lat}}, {{view.current.property_details.lng}}</p>
                      <p>Zestimate: {{view.current.property_details.zestimate}}</p>
                      <p>Current Bathroom: {{view.current.property_details.bathrooms}}</p>
                      <p>Current Bedrooms: {{view.current.property_details.bedrooms}}</p>
                      <p>Annual Project Revenue: {{view.current.revenue_potential.ltm | currency: "$":0 }}</p>
                      <p>Predicted Occupancy Percentage: {{view.current.occ_predicted.ltm | number:0}}%</p>
                      <p>Average Comparable Day Rate: {{view.current.adr_predicted.ltm | currency: "$"}}</p>
                    </div>
                  </div>
                </div>
          </div>
            <br>

              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3>Comparable Properties</h3>
                </div>
                <div class="panel-body">
                  <div ng-repeat='prop in view.data.comps'>
                    <div class='col-md-6'>
                      <div class='panel'>
                        <div class='col-md-6'>
                          <img ng-src="https://maps.googleapis.com/maps/api/streetview?size=600x300&location={{prop.lat}},{{prop.lng}}&key=AIzaSyBdTlnuIm3BaESwJbfcIpbACvsgRh21UXg" />
                        </div>
                        <div class='col-md-6'>
                          <p>BA: {{prop.bathrooms}}</p>
                          <p>BEDs: {{prop.bedrooms}}</p>
                          <p>ACC: {{prop.accommodates}}</p>
                          <p>Occupancy Rates: {{ (getAverage(prop.occ) * 100) | number:0}}%</p>
                          <p>Average Daily Rates: {{ getAverage(prop.adr) | currency:"$":0}}</p>
                          <p>Revenue Potential: {{prop.revenue_potential.ltm[0] | currency:"$":0}}
                          <p>URL: {{prop.url}}</p>
                          <p>GEO: {{prop.lat}} , {{prop.lng}}</p>
                          <p>UID: {{prop.prop_id}}</p>
                          <p>Distance: {{prop.distance_meters}} m</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>

          </div>


    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
    <script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-route.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript" src='js/app.js'></script>
    <script type="text/javascript" src='js/services.js'></script>
    <script type="text/javascript" src='js/controllers.js'></script>

  </body>
</html>
